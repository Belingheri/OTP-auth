<!DOCTYPE html>
<html lang="en">
  <head>
    <title>2FA Controlla Codice</title>

    <meta charset="utf-8" />
    <meta name="description" content="2FA QR code generator" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bulma@0.9.2/css/bulma.min.css"
    />

    <style>
      html {
        overflow-y: auto;
      }
      .pointer {
        cursor: pointer;
      }
    </style>

    <script src="./js/bulma.js"></script>

    <script src="./js/jsOTP.js"></script>
  </head>
  <body>
    <nav class="navbar is-black" role="navigation" aria-label="main navigation">
      <div class="navbar-brand">
        <a class="navbar-item" href="./"> OTP-Auth </a>

        <a
          role="button"
          class="navbar-burger"
          aria-label="menu"
          aria-expanded="false"
          data-target="navbarBasicExample"
        >
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>

      <div id="navbarBasicExample" class="navbar-menu">
        <div class="navbar-start">
          <a class="navbar-item" href="./configQr.html"> 2FA Genera QR </a>

          <a class="navbar-item" href="./generaCodice.html">
            Controllo Codice
          </a>
        </div>
        <div class="navbar-end">
          <div class="navbar-item">
            <div class="field is-grouped">
              <p class="control">
                <a
                  class="button is-link is-light"
                  href="https://github.com/Belingheri/OTP-auth"
                  target="_blank"
                >
                  <span class="icon">
                    <img src="./img/githubLogo.png" alt="githubLogo" />
                  </span>
                  <span>GitHub</span>
                </a>
              </p>
            </div>
          </div>
        </div>
      </div>
    </nav>

    <div class="container is-fluid">
      <div class="columns">
        <div class="column is-4">
          <h2 class="subtitle is-2">OTP Salvati</h2>
          <small>
            Gli OTP mostrati e savati sono solo quelli su questo PC ed in questo
            browserüîè, non avviene nessun tipo di salvataggio online, il
            programma tiene <b>tutti</b> i dati ed effettua i calcoli localmente
            üòé
          </small>
          <div id="listaSalvati"></div>
        </div>
        <div class="column">
          <h2 class="title is-2">Generazione Codice</h2>
          <h3 class="subtitle is-3">Seleziona un elemento dalla lista</h3>
          <small>La generazione del codice avvine localmente!</small>
          <label id="id" class="label"></label>
          <div class="field has-addons" id="time-container">
            <p class="control">
              <a class="button is-static" id="countDown"> CountDown s </a>
            </p>
            <p class="control">
              <input
                id="otpcode"
                type="text"
                class="input"
                aria-label="Default"
                readonly
              />
            </p>
          </div>
          <div class="field has-addons" id="count-container">
            <p class="control">
              <a class="button is-static" id="countNum"> CountNum </a>
            </p>
            <p class="control">
              <input
                id="otpcode-count"
                type="text"
                class="input"
                aria-label="Default"
                readonly
              />
            </p>
            <div class="buttons has-addons">
              <span id="minus" class="button plus-minus" disabled>-</span>
              <span id="plus" class="button plus-minus" disabled>+</span>
            </div>
          </div>

          <h2 class="title is-2">Verifica codice</h2>
          <h3 class="subtitle is-3">
            Inserisci il codice generato dall'aplicazione
          </h3>
          <div class="field">
            <label class="label is-small"
              >Si, corrisposnde a quello generato sopra</label
            >
            <div class="field has-addons">
              <p class="control">
                <input class="input" type="text" id="verificaCodcie" />
              </p>
              <p class="control">
                <button class="button is-primary" id="verificaCodiceFtn">
                  Verifica
                </button>
              </p>
            </div>
            <span id="esito"></span>
          </div>
        </div>
      </div>
    </div>
    <script type="module">
      import {
        stampaListaOTPSalvati,
        getOTPById,
        OTPSelezionato,
        verificaCodice,
        handlePlusMinus,
      } from "./js/generaCodice.js?v=0.2.1";

      stampaListaOTPSalvati("listaSalvati", OTPSelezionato);
      document
        .getElementById("verificaCodiceFtn")
        .addEventListener("click", verificaCodice);

      document.querySelectorAll(".plus-minus").forEach((element) => {
        element.addEventListener("click", handlePlusMinus);
      });
    </script>
    <footer class="footer">
      <div class="content has-text-centered">
        <p>
          <strong>OTP-Auth</strong> by
          <a href="https://about.me/belingheri" target="_blank">Belingheri</a>.
          The source code is on
          <a href="https://github.com/Belingheri/OTP-auth" target="_blank"
            >GitHub</a
          >.
        </p>
      </div>
    </footer>
  </body>
</html>
